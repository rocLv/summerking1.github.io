(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{547:function(s,a,e){"use strict";e.r(a);var n=e(32),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_1-下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像"}},[s._v("#")]),s._v(" 1.下载镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@smartops42 smartmining]# docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g\nUsing default tag: latest\nlatest: Pulling from helowin/oracle_11g\ned5542b8e0e1: Pull complete \na3ed95caeb02: Pull complete \n1e8f80d0799e: Pull complete \nDigest: sha256:4c12b98372dfcbaafcd9564a37c8d91456090a5c6fb07a4ec18270c9d9ef9726\nStatus: Downloaded newer image for registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g:latest\nregistry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g:latest\n[root@smartops42 smartmining]# \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h2",{attrs:{id:"_2-启动镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动镜像"}},[s._v("#")]),s._v(" 2.启动镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@smartops42 smartmining]# docker run -d --name oracle -p 1521:1521 registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g\n513fcff2d2b17cedb091d92d5eb8c705ca874f78b6a27d7e65fabe0abed90ca1\n[root@smartops42 smartmining]#\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_3-宿主机创建文件夹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-宿主机创建文件夹"}},[s._v("#")]),s._v(" 3.宿主机创建文件夹")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@smartops42 smartmining]# mkdir -p /opt/oracle/\n[root@smartops42 smartmining]# mkdir -p /opt/oracle/flash_recovery_area/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"_4-拷贝数据库文件至宿主机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-拷贝数据库文件至宿主机"}},[s._v("#")]),s._v(" 4.拷贝数据库文件至宿主机")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@smartops42 smartmining]# docker ps -a\nCONTAINER ID        IMAGE                                                  COMMAND                  CREATED             STATUS                      PORTS                    NAMES\n513fcff2d2b1        registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g   "/bin/sh -c \'/home/o…"   2 minutes ago       Up About a minute           0.0.0.0:1521->1521/tcp   oracle\n[root@smartops42 smartmining]# docker cp 513fcff2d2b1:/home/oracle/app/oracle/oradata /opt/oracle/oradata\n[root@smartops42 smartmining]# docker cp 513fcff2d2b1:/home/oracle/app/oracle/flash_recovery_area/helowin /opt/oracle/flash_recovery_area/helowin\n[root@smartops42 smartmining]# chmod -R 777 /opt/oracle/\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"_5-停止和删除容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-停止和删除容器"}},[s._v("#")]),s._v(" 5.停止和删除容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@smartops42 smartmining]# docker stop 513fcff2d2b1\n513fcff2d2b1\n[root@smartops42 smartmining]# docker rm  513fcff2d2b1\n513fcff2d2b1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"_6-启动docker容器（映射数据文件）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动docker容器（映射数据文件）"}},[s._v("#")]),s._v(" 6.启动docker容器（映射数据文件）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@smartops42 smartmining]# docker run -d --name oracle_llg -p 1521:1521 --privileged=true -v /opt/oracle/oradata:/home/oracle/app/oracle/oradata -v /opt/oracle/flash_recovery_area/helowin:/home/oracle/app/oracle/flash_recovery_area/helowin registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g\n39721ba8b1dd97160d19018f7115eefe19439a3727a335c471fa88a56d2f3c88\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"_7-执行并完成基础设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-执行并完成基础设置"}},[s._v("#")]),s._v(" 7.执行并完成基础设置")]),s._v(" "),e("ol",[e("li",[s._v("进入容器")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@smartops42 oracle]# docker ps \nCONTAINER ID        IMAGE                                                  COMMAND                  CREATED              STATUS              PORTS                    NAMES\n39721ba8b1dd        registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g   "/bin/sh -c \'/home/o…"   About a minute ago   Up About a minute   0.0.0.0:1521->1521/tcp   oracle_llg\n[root@smartops42 oracle]# docker exec -it 39721ba8b1dd /bin/bash\n[oracle@39721ba8b1dd /]$\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("加载环境变量")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[oracle@39721ba8b1dd /]$ source /home/oracle/.bash_profile\n[oracle@39721ba8b1dd /]$ su root \nPassword: \n#密码：helowin\n[root@39721ba8b1dd /]# vi /etc/profile\n#在末尾添加\n    export ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2\n    export ORACLE_SID=helowin\n    export PATH=$ORACLE_HOME/bin:$PATH\n#刷新配置\n[root@39721ba8b1dd /]# source /etc/profile\n[root@39721ba8b1dd /]# su oracle\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("登录")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[oracle@39721ba8b1dd /]$ sqlplus /nolog\n\nSQL*Plus: Release 11.2.0.1.0 Production on Wed Nov 4 00:32:15 2020\n\nCopyright (c) 1982, 2009, Oracle.  All rights reserved.\n\nSQL> connect /as sysdba\nConnected.\nSQL> \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("修改默认用户密码")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SQL> alter user system identified by system;\n\nUser altered.\n\nSQL> alter user sys identified by sys;\n\nUser altered.\n\nSQL> ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;\n\nProfile altered.\n\nSQL>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("创建表空间")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SQL> create tablespace test datafile '/home/oracle/app/oracle/oradata/helowin/test.dbf' size 500M autoextend on next 50M maxsize unlimited;\n\nTablespace created.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ol",{attrs:{start:"6"}},[e("li",[s._v("创建用户并指定表空间，授权")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SQL> create user summer IDENTIFIED BY 123456 default tablespace test;\n\nUser created.\n\nSQL> grant connect,resource,dba to summer;\n\nGrant succeeded.\n\nSQL>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",[s._v("名称")]),s._v(" "),e("th",[s._v("参数")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("IP")]),s._v(" "),e("td",[s._v("宿主机ip")])]),s._v(" "),e("tr",[e("td",[s._v("端口")]),s._v(" "),e("td",[s._v("1521")])]),s._v(" "),e("tr",[e("td",[s._v("SID")]),s._v(" "),e("td",[s._v("helowin")])]),s._v(" "),e("tr",[e("td",[s._v("账号")]),s._v(" "),e("td",[s._v("summer")])]),s._v(" "),e("tr",[e("td",[s._v("密码")]),s._v(" "),e("td",[s._v("123456")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/95.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"_8-修改sid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-修改sid"}},[s._v("#")]),s._v(" 8.修改SID")]),s._v(" "),e("p",[s._v("原来SID为helowin，先需要修改为orcl")]),s._v(" "),e("ol",[e("li",[s._v("关闭数据库")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[oracle@39721ba8b1dd /]$ sqlplus /nolog\n\nSQL*Plus: Release 11.2.0.1.0 Production on Wed Nov 4 01:00:41 2020\n\nCopyright (c) 1982, 2009, Oracle.  All rights reserved.\n\nSQL> connect /as sysdba\nConnected.\nSQL> shutdown immediate\nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("修改环境变量")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[oracle@39721ba8b1dd /]$ vi /home/oracle/.bash_profile\n#更改\nORACLE_SID=orcl;export ORACLE_SID\n[oracle@39721ba8b1dd /]$ cat /etc/oratab\norcl:/home/oracle/app/oracle/product/11.2.0/dbhome_2:Y\n[oracle@39721ba8b1dd /]$ cd $ORACLE_HOME/dbs\n[oracle@39721ba8b1dd dbs]$ ll\ntotal 32\n-rw-r-----. 1 oracle oinstall 3584 Jan  4  2016 123.sp\n-rw-rw----. 1 oracle oinstall 1544 Nov  4 01:01 hc_helowin.dat\n-rw-r--r--. 1 oracle oinstall 2851 May 16  2009 init.ora\n-rw-r--r--. 1 oracle oinstall 1067 Jan  4  2016 inithelowin.ora\n-rw-r-----. 1 oracle oinstall   24 Aug 23  2014 lkHELOWIN\n-rw-r-----. 1 oracle oinstall   24 Dec 29  2015 lkORCL\n-rw-r-----. 1 oracle oinstall 2048 Nov  4 00:33 orapwhelowin\n-rw-r-----. 1 oracle oinstall 3584 Nov  4 00:25 spfilehelowin.ora\n[oracle@39721ba8b1dd dbs]$ mv hc_helowin.dat hc_orcl.dat \n[oracle@39721ba8b1dd dbs]$ mv orapwhelowin orapworcl    \n[oracle@39721ba8b1dd dbs]$ mv spfilehelowin.ora spfileorcl.ora \n[oracle@39721ba8b1dd dbs]$ mv lkHELOWIN lkORCL\n[oracle@39721ba8b1dd dbs]$ exit\nexit\n[root@39721ba8b1dd /]# exit\nexit\n[oracle@39721ba8b1dd /]$ exit\nexit\n[root@smartops42 oracle]# docker ps\nCONTAINER ID        IMAGE                                                  COMMAND                  CREATED             STATUS              PORTS                    NAMES\n39721ba8b1dd        registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g   "/bin/sh -c \'/home/o…"   49 minutes ago      Up 49 minutes       0.0.0.0:1521->1521/tcp   oracle_llg\n[root@smartops42 oracle]# docker restart 39721ba8b1dd\n39721ba8b1dd\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/96.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);