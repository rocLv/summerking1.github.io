(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{552:function(a,s,n){"use strict";n.r(s);var t=n(32),e=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"_1-获取下载镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取下载镜像"}},[a._v("#")]),a._v(" 1.获取下载镜像")]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker run -d -p 3000:3000 --name=grafana -v /home/smartmining/grafana:/var/lib/grafana grafana/grafana")]),a._v("\nUnable to "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" image "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'grafana/grafana:latest'")]),a._v(" locally\nlatest: Pulling from grafana/grafana\n188c0c94c7c5: Pull complete \nde79f55c0b0f: Pull complete \na1b840f120d9: Pull complete \nb46b3ffb9b7d: Pull complete \nf04fb38cc8ac: Pull complete \n4f4fb700ef54: Pull complete \n4abcddc85579: Pull complete \n5059d9c487b2: Pull complete \nDigest: sha256:6d42886b3ebe286b92eca592e1251b5dc128e611678ccffbefb5701bbf7ef186\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" grafana/grafana:latest\n0948b47dd4370ec6f546c34e82db1987cc0e6677e448e0a6fa2abd8a90960972\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("h2",{attrs:{id:"_2-解决报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-解决报错"}},[a._v("#")]),a._v(" 2.解决报错")]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker log 0948b47dd437")]),a._v("\ndocker: "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'log'")]),a._v(" is not a docker command.\nSee "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'docker --help'")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker logs 0948b47dd437")]),a._v("\nmkdir: can"),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'t create directory '")]),a._v("/var/lib/grafana/plugins"),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("': Permission denied\nGF_PATHS_DATA='")]),a._v("/var/lib/grafana' is not writable.\nYou may have issues with "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" permissions, "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" information here: http://docs.grafana.org/installation/docker/"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#migration-from-a-previous-version-of-the-docker-container-to-5-1-or-later")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ll")]),a._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# chmod 777 /home/smartmining/grafana/")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker restart 0948b47dd437")]),a._v("\n0948b47dd437\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 grafana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker ps")]),a._v("\nCONTAINER ID        IMAGE                                  COMMAND                  CREATED              STATUS              PORTS                            NAMES\n0948b47dd437        grafana/grafana                        "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/run.sh"')]),a._v("                About a minute ago   Up "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" seconds        "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:3000-"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v("/tcp           grafana\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br")])]),n("h2",{attrs:{id:"_3-验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-验证"}},[a._v("#")]),a._v(" 3.验证")]),a._v(" "),n("ul",[n("li",[a._v("IP:3000")]),a._v(" "),n("li",[a._v("默认用户名密码为：admin/admin")]),a._v(" "),n("li",[a._v("第一次登陆的时候，会被要求需要修改密码\n"),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/993.png",alt:""}})])]),a._v(" "),n("h2",{attrs:{id:"_4-整合zabbix"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-整合zabbix"}},[a._v("#")]),a._v(" 4.整合zabbix")]),a._v(" "),n("ul",[n("li",[a._v("下载zabbix插件")])]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@smartops43 conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker exec -it 0948b47dd437 /bin/bash")]),a._v("\nbash-5.0$ grafana-cli plugins "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" alexanderzobnin-zabbix-app\ninstalling alexanderzobnin-zabbix-app @ "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.0")]),a._v(".2\nfrom: https://grafana.com/api/plugins/alexanderzobnin-zabbix-app/versions/4.0.2/download\ninto: /var/lib/grafana/plugins\n\n✔ Installed alexanderzobnin-zabbix-app successfully \n\nRestart grafana after installing plugins "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("service grafana-server restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\nbash-5.0$ \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("ul",[n("li",[n("p",[a._v("重启grafana容器")])]),a._v(" "),n("li",[n("p",[a._v("此时可看到zabbix的插件已成功安装\n"),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/992.png",alt:""}})])]),a._v(" "),n("li",[n("p",[a._v("配置zabbix数据源\n"),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/991.png",alt:""}})])])]),a._v(" "),n("h2",{attrs:{id:"_5-备份"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-备份"}},[a._v("#")]),a._v(" 5.备份")]),a._v(" "),n("ul",[n("li",[a._v("Zabbix\n使用如下命令将Zabbix的数据库进行备份，备份为sql文件，自行保存到其他服务器。然后添加到Crontab中。")])]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[a._v("docker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" zabbix-mysql mysqldump -uroot -pmysql57 zabbix "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" zabbix.sql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" zabbix.sql "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1:/root\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("恢复")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('docker cp zabbix.sql zabbix-mysql:/tmp/\ndocker exec zabbix-mysql mysql -uroot -pmysql57 zabbix -e "source /tmp/zabbix.sql"\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("ul",[n("li",[a._v("Grafana\n备份")])]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[a._v("docker "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" grafana:/var/lib/grafana/grafana.db ./\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" grafana.db "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0.1:/root\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("恢复")]),a._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[a._v("docker "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" grafana.db grafana:/var/lib/grafana/grafana.db\ndocker restart grafana\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("h2",{attrs:{id:"简单展示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简单展示"}},[a._v("#")]),a._v(" 简单展示")]),a._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/800.png",alt:""}}),a._v(" "),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/801.png",alt:""}}),a._v(" "),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/802.png",alt:""}}),a._v(" "),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/803.png",alt:""}}),a._v(" "),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/804.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);