(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{535:function(s,a,t){"use strict";t.r(a);var e=t(32),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("ol",[t("li",[s._v("在es的bin目录下执行./elasticsearch-certutil ca生成elastic-stack-ca.p12")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost elasticsearch-7.6.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd bin/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nelasticsearch           elasticsearch-cli            elasticsearch-keystore  elasticsearch-saml-metadata    elasticsearch-sql-cli-7.6.0.jar  x-pack-security-env\nelasticsearchbak        elasticsearch-croneval       elasticsearch-migrate   elasticsearch-setup-passwords  elasticsearch-syskeygen          x-pack-watcher-env\nelasticsearch-certgen   elasticsearch-env            elasticsearch-node      elasticsearch-shard            elasticsearch-users\nelasticsearch-certutil  elasticsearch-env-from-file  elasticsearch-plugin    elasticsearch-sql-cli          x-pack-env\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./elasticsearch-certutil ca")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Please enter the desired output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic-stack-ca.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": elastic-stack-ca.p12\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elastic-stack-ca.p12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("生成 elastic-stack-ca.p12后，执行命令elasticsearch-certutil，注意elastic-stack-ca.p12文件必须是完整路径，否则报错")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./elasticsearch-certutil cert --ca /home/smartmining/elasticsearch-7.6.0/elastic-stack-ca.p12")]),s._v("\n\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" CA "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/home/elasticsearch/elastic-stack-ca.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" \nPlease enter the desired output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic-certificates.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": elastic-certificates.p12\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elastic-certificates.p12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里可以不用输入密码，直接按回车键")]),s._v("\nCertificates written to /home/elasticsearch/elastic-certificates.p12\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("生成的elastic-certificates.p12文件拷贝到每个节点的config目录下")]),s._v(" "),t("li",[s._v("修改配置elasticsearch.yml\nelasticsearch.yml配置文件中增加下列配置")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("xpack.security.enabled: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.security.transport.ssl.enabled: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.security.transport.ssl.verification_mode: certificate\nxpack.security.transport.ssl.keystore.path: elastic-certificates.p12\nxpack.security.transport.ssl.truststore.path: elastic-certificates.p12\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("配置密码\n"),t("code",[s._v("./elasticsearch-setup-passwords interactive")])])]),s._v(" "),t("p",[s._v("验证：浏览器访问弹出要求输入账号密码框\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/74.png",alt:""}})])])}),[],!1,null,null,null);a.default=n.exports}}]);