(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{568:function(s,t,a){"use strict";a.r(t);var n=a(32),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"此次安装基于docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#此次安装基于docker"}},[s._v("#")]),s._v(" 此次安装基于docker")]),s._v(" "),a("h3",{attrs:{id:"第一步-下拉镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-下拉镜像"}},[s._v("#")]),s._v(" 第一步 下拉镜像")]),s._v(" "),a("p",[a("code",[s._v("docker pull mysql:8.0.21")]),s._v(" "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/75.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"第二步-启动镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步-启动镜像"}},[s._v("#")]),s._v(" 第二步 启动镜像")]),s._v(" "),a("p",[a("code",[s._v("docker run -p 3307:3306 --name mysql -e MYSQL_ROOT_PASSWORD=hadoop -d mysql:8.0.21")])]),s._v(" "),a("h3",{attrs:{id:"第三步-启动成功后，进入容器内部拷贝配置文件，到宿主主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步-启动成功后，进入容器内部拷贝配置文件，到宿主主机"}},[s._v("#")]),s._v(" 第三步 启动成功后，进入容器内部拷贝配置文件，到宿主主机")]),s._v(" "),a("p",[a("code",[s._v("docker cp mysql:/etc/mysql /home/smartmining/mysql8")])]),s._v(" "),a("p",[a("code",[s._v("拷贝容器的 /etc/mysql目录到 主机目录/home/smartmining/mysql8")])]),s._v(" "),a("h3",{attrs:{id:"第四步-删除mysql容器，重新创建容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四步-删除mysql容器，重新创建容器"}},[s._v("#")]),s._v(" 第四步 删除mysql容器，重新创建容器")]),s._v(" "),a("p",[a("code",[s._v("docker stop mysql")]),s._v(" "),a("code",[s._v("docker rm mysql")])]),s._v(" "),a("h3",{attrs:{id:"第五步-启动mysql-，挂载配置文件，数据持久化到宿主主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五步-启动mysql-，挂载配置文件，数据持久化到宿主主机"}},[s._v("#")]),s._v(" 第五步 启动mysql ，挂载配置文件，数据持久化到宿主主机")]),s._v(" "),a("p",[s._v("启动脚本 文件名为mysql8.0.21.sh")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\ndocker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v(":3306 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--name mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--restart unless-stopped "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /home/smartmining/mysql8/mysql:/etc/mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /home/smartmining/mysql8/logs:/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /home/smartmining/mysql8/data:/var/lib/mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /etc/localtime:/etc/localtime "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d mysql:8.0.21\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("p",[s._v("命令解释：\n-p 端口映射\n--privileged=true  挂载文件权限设置\n--restart unless-stopped  设置 开机后自动重启容器\n-v /home/smartmining/mysql8/mysql:/etc/mysql    挂载配置文件\n-v /home/smartmining/mysql8/logs:/logs \\      挂载日志\n-v /home/smartmining/mysql8/data:/var/lib/mysql \\  挂载数据文件 持久化到主机，\n-v /etc/localtime:/etc/localtime    容器时间与宿主机同步\n-e MYSQL_ROOT_PASSWORD=hadoop    设置密码\n-d  mysql:8.0.21   后台启动,mysql")])]),s._v(" "),a("h3",{attrs:{id:"第六步，执行脚本-启动镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第六步，执行脚本-启动镜像"}},[s._v("#")]),s._v(" 第六步，执行脚本 启动镜像")]),s._v(" "),a("p",[s._v("大功告成----挂载出来的数据文件以及配置文件\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/76.png",alt:""}}),s._v(" "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/summerking1/image@main/77.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hadoop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncreate user smartdbm@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified  by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SmArT@2019'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngrant all privileges on *.* to smartdbm@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" with grant option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuse mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" where user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smartdbm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \nALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smartdbm'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v(" PASSWORD EXPIRE NEVER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smartdbm'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SmArT@2019'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);