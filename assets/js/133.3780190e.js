(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{613:function(s,a,t){"use strict";t.r(a);var e=t(32),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"redis做压测可以用自带的redis-benchmark工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis做压测可以用自带的redis-benchmark工具"}},[s._v("#")]),s._v(" redis做压测可以用自带的redis-benchmark工具")]),s._v(" "),t("blockquote",[t("p",[s._v("Redis 之父 Salvatore 就说过：“通过执行GET/SET命令来测试Redis就像在雨天检测法拉利的雨刷清洁镜子的效果”。\n很多时候人们跑到我这里，他们想知道为什么自己的Redis-Benchmark统计的结果低于最优结果 。\n但我们必须要把各种不同的真实情况考虑进来，例如：")])]),s._v(" "),t("p",[s._v("可能受到哪些客户端运行环境的限制？")]),s._v(" "),t("p",[s._v("是同一个版本号吗？")]),s._v(" "),t("p",[s._v("测试环境中的表现与应用将要运行的环境是否一致？")]),s._v(" "),t("p",[s._v("Redis-Benchmark的测试结果提供了一个保证你的 Redis-Server 不会运行在非正常状态下的基准点，但是你永远不要把它作为一个真实的“压力测试”。压力测试需要反应出应用的运行方式，并且需要一个尽可能的和生产相似的环境。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("p",[s._v("redis 性能测试的基本命令如下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("redis-benchmark "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nredis-benchmark -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.231 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27000")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" -t get\n-c表示连接数\n-n表示请求数\n更多参数请输入 --help 查看~\n压测需要一段时间，因为它需要依次压测多个命令的结果，如：get、set、incr、lpush等等，所以我们需要耐心等待\n如果只需要压测某个命令，如：get，那么可以在以上的命令后加一个参数-t（红色部分）：\nredis-benchmark -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6086")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" -t get\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("注意：该命令是在 redis 的目录下执行的，而不是 redis 客户端的内部指令。")])]),s._v(" "),t("h3",{attrs:{id:"实例（经实践redis4在其src目录下执行，redis5在其安装目录下执行即可）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例（经实践redis4在其src目录下执行，redis5在其安装目录下执行即可）"}},[s._v("#")]),s._v(" 实例（经实践redis4在其src目录下执行，redis5在其安装目录下执行即可）")]),s._v(" "),t("p",[s._v("以下实例同时执行 10000 个请求来检测性能：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@0b4ca1896e4e redis-5.0.8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-benchmark -h 192.168.0.231 -p 27000 -c 50 -n 10000 -t get")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" GET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" requests completed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.21")]),s._v(" seconds //在0.21秒内完成10000个请求\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" parallel clients //50个并行客户端\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" bytes payload  //3字节有效载荷\n  keep alive: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" //保持活力：1\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.73")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" milliseconds  //毫秒\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.51")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.58")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.72")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.85")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.99")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46728.97")]),s._v(" requests per second\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost src"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/home/smartmining/redis-4.0.11/src\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost src"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-benchmark -h 192.168.0.90 -p 27000 -c 50 -n 10000 -t get")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" GET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" requests completed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.20")]),s._v(" seconds\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" parallel clients\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" bytes payload\n  keep alive: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("89.75")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.08")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" milliseconds\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49504.95")]),s._v(" requests per second")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);