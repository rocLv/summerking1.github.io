(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{618:function(v,_,r){"use strict";r.r(_);var s=r(32),t=Object(s.a)({},(function(){var v=this,_=v.$createElement,r=v._self._c||_;return r("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[r("h2",{attrs:{id:"什么是redis持久化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是redis持久化"}},[v._v("#")]),v._v(" 什么是Redis持久化")]),v._v(" "),r("p",[v._v("持久化就是把内存的数据写到磁盘中去，防止服务宕机了内存数据丢失")]),v._v(" "),r("p",[v._v("Redis 提供两种持久化机制 "),r("strong",[v._v("RDB（默认）和 AOF")]),v._v(":")]),v._v(" "),r("blockquote",[r("p",[v._v("rdb模式即生成的快照文件dump. rdb，更新效率高，但中间有间隔不能持续更新\nAOF模式（append only file ）即生成的日志文件特点不会丢数据只要重启数据可恢复")])]),v._v(" "),r("h2",{attrs:{id:"rdb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rdb"}},[v._v("#")]),v._v(" RDB")]),v._v(" "),r("p",[v._v("RDB：是Redis DataBase缩写快照,按照一定的时间将内存的数据以快照的形式保存到硬盘中，对应产生的数据文件为"),r("strong",[v._v("dump.rdb")]),v._v("。通过配置文件中的save参数来定义快照的周期。")]),v._v(" "),r("ul",[r("li",[v._v("优点：")])]),v._v(" "),r("p",[v._v("1、"),r("strong",[v._v("只有一个文件")]),v._v(" dump.rdb，方便持久化。")]),v._v(" "),r("p",[v._v("2、"),r("strong",[v._v("容灾性好")]),v._v("，一个文件可以保存到安全的磁盘。")]),v._v(" "),r("p",[v._v("3、"),r("strong",[v._v("性能最大化")]),v._v("，fork子进程来完成写操作，让主进程继续处理命令，所以是IO最大化。使用单独子进程来进行持久化，主进程不会进行任何IO操作，保证了redis的高性能")]),v._v(" "),r("p",[v._v("4.相对于数据集大时，比 OF的"),r("strong",[v._v("启动效率更高")]),v._v("。")]),v._v(" "),r("ul",[r("li",[v._v("缺点：")])]),v._v(" "),r("p",[v._v("1、"),r("strong",[v._v("数据安全性低")]),v._v("。RDB是间隔一段时间进行持久化，如果持久化之间 redis 发生故障，会发生数据丢失。所以这种方式更适合数据要求不严谨的时候)")]),v._v(" "),r("h2",{attrs:{id:"aof"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#aof"}},[v._v("#")]),v._v(" AOF")]),v._v(" "),r("p",[v._v("AOF持久化: (即Append Only File持久化)，则是将Redis执行的每次写命令记录到单独的日志文件中，当重启Redis会重新将持久化的日志中文件恢复数据。")]),v._v(" "),r("ul",[r("li",[v._v("优点：")])]),v._v(" "),r("p",[v._v("1、"),r("strong",[v._v("数据安全")]),v._v("，aof 持久化可以配置 appendfsync 属性，有 always，每进行一次命令操作就记录到 aof 文件中一次。")]),v._v(" "),r("p",[v._v("2、通过 append 模式写文件，即使中途服务器宕机，可以通过 redis-check-aof 工具"),r("strong",[v._v("解决数据一致性问题")]),v._v("。")]),v._v(" "),r("p",[v._v("3、AOF 机制的 rewrite 模式。AOF 文件没被 rewrite 之前（文件过大时会对命令进行合并重写），可以删除其中的某些命令（比如"),r("strong",[v._v("误操作")]),v._v("的 flushall）)")]),v._v(" "),r("ul",[r("li",[v._v("缺点：")])]),v._v(" "),r("p",[v._v("1、AOF 文件比 RDB 文件大，且"),r("strong",[v._v("恢复速度慢")]),v._v("。")]),v._v(" "),r("p",[v._v("2、数据集大的时候，比 rdb 启动"),r("strong",[v._v("效率低")]),v._v("。")])])}),[],!1,null,null,null);_.default=t.exports}}]);